<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; width:300px; padding:12px; }
    label { display:block; margin-top:8px; }
    button { margin-top:12px; padding:8px 10px; }
  </style>
</head>
<body>
  <h3>GIF Collector</h3>
  <label>
    Crawl depth:
    <select id="depth">
      <option value="0">0 — current page only</option>
      <option value="1" selected>1 — follow same-origin links (one level)</option>
    </select>
  </label>
  <label><input type="checkbox" id="preservePath" checked> Preserve remote path in filename</label>
  <button id="run">Find & Download GIFs</button>
  <div id="status" style="margin-top:10px; font-size:13px"></div>

  <script>
    document.getElementById('run').addEventListener('click', async () => {
      const depth = Number(document.getElementById('depth').value);
      const preservePath = document.getElementById('preservePath').checked;

      document.getElementById('status').textContent = 'Running...';
      const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });
      chrome.runtime.sendMessage({ action: 'collect_gifs', tabId: tab.id, depth, preservePath }, (resp) => {
        document.getElementById('status').textContent = resp?.message || 'Done';
      });
    });
  </script>
</body>
</html>
